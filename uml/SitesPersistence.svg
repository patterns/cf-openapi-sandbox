<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="780px" preserveAspectRatio="none" style="width:536px;height:780px;" version="1.1" viewBox="0 0 536 780" width="536px" zoomAndPan="magnify"><defs><filter height="300%" id="fo5aqr5tcq8cm" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="125" x="204.8125" y="26.708">"Sites (write)"</text><ellipse cx="383.625" cy="40.9531" fill="#000000" filter="url(#fo5aqr5tcq8cm)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="176" x="295.625" y="92.3521"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="156" x="305.625" y="113.4907">Ensure Login middleware</text><polygon fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" points="332.125,146.3208,435.125,146.3208,447.125,158.3208,435.125,170.3208,332.125,170.3208,320.125,158.3208,332.125,146.3208" style="stroke: #383838; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="332.125" y="162.1289">hasLoginSession?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="300.125" y="155.7266">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="447.125" y="155.7266">no</text><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="199" x="182.25" y="180.3208"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="179" x="192.25" y="201.4595">Access Body Property "sites"</text><polygon fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" points="265.75,234.2896,297.75,234.2896,309.75,246.2896,297.75,258.2896,265.75,258.2896,253.75,246.2896,265.75,234.2896" style="stroke: #383838; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="32" x="265.75" y="250.0977">valid?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="13" x="240.75" y="243.6953">ok</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="309.75" y="243.6953">no</text><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="140" x="117" y="268.2896"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="120" x="127" y="289.4282">Parse into JSON obj</text><polygon fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" points="171,322.2583,203,322.2583,215,334.2583,203,346.2583,171,346.2583,159,334.2583,171,322.2583" style="stroke: #383838; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="32" x="171" y="338.0664">valid?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="13" x="146" y="331.6641">ok</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="215" y="331.6641">no</text><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="187" x="13" y="356.2583"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="23" y="377.397">Marshal JSON to text/string</text><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="148" x="32.5" y="410.2271"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="42.5" y="431.3657">Write file "sites.json"</text><polygon fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" points="80,464.1958,133,464.1958,145,476.1958,133,488.1958,80,488.1958,68,476.1958,80,464.1958" style="stroke: #383838; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="80" y="480.0039">success?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="13" x="55" y="473.6016">ok</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="145" y="473.6016">no</text><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="89" x="10" y="498.1958"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="69" x="20" y="519.3345">Status 201</text><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="79" x="119" y="498.1958"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="129" y="519.3345">Error 500</text><polygon fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" points="106.5,538.1646,118.5,550.1646,106.5,562.1646,94.5,550.1646,106.5,538.1646" style="stroke: #383838; stroke-width: 1.5;"/><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="79" x="228" y="356.2583"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="238" y="377.397">Error 400</text><polygon fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" points="187,568.1646,199,580.1646,187,592.1646,175,580.1646,187,568.1646" style="stroke: #383838; stroke-width: 1.5;"/><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="79" x="337" y="268.2896"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="347" y="289.4282">Error 400</text><polygon fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" points="281.75,598.1646,293.75,610.1646,281.75,622.1646,269.75,610.1646,281.75,598.1646" style="stroke: #383838; stroke-width: 1.5;"/><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="79" x="446" y="180.3208"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="59" x="456" y="201.4595">Error 400</text><polygon fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" points="383.625,628.1646,395.625,640.1646,383.625,652.1646,371.625,640.1646,383.625,628.1646" style="stroke: #383838; stroke-width: 1.5;"/><rect fill="#F8F8F8" filter="url(#fo5aqr5tcq8cm)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #383838; stroke-width: 1.5;" width="118" x="324.625" y="672.1646"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="334.625" y="693.3032">Write Response</text><ellipse cx="383.625" cy="758.5322" fill="#FFFFFF" filter="url(#fo5aqr5tcq8cm)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="383.625" cy="758.5322" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="383.625" x2="383.625" y1="50.9531" y2="92.3521"/><polygon fill="#383838" points="379.625,82.3521,383.625,92.3521,387.625,82.3521,383.625,86.3521" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="387.625" y="72.2578">POST /secure/edit_sites</text><line style="stroke: #383838; stroke-width: 1.5;" x1="106.5" x2="106.5" y1="390.2271" y2="410.2271"/><polygon fill="#383838" points="102.5,400.2271,106.5,410.2271,110.5,400.2271,106.5,404.2271" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="68" x2="54.5" y1="476.1958" y2="476.1958"/><line style="stroke: #383838; stroke-width: 1.5;" x1="54.5" x2="54.5" y1="476.1958" y2="498.1958"/><polygon fill="#383838" points="50.5,488.1958,54.5,498.1958,58.5,488.1958,54.5,492.1958" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="145" x2="158.5" y1="476.1958" y2="476.1958"/><line style="stroke: #383838; stroke-width: 1.5;" x1="158.5" x2="158.5" y1="476.1958" y2="498.1958"/><polygon fill="#383838" points="154.5,488.1958,158.5,498.1958,162.5,488.1958,158.5,492.1958" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="54.5" x2="54.5" y1="532.1646" y2="550.1646"/><line style="stroke: #383838; stroke-width: 1.5;" x1="54.5" x2="94.5" y1="550.1646" y2="550.1646"/><polygon fill="#383838" points="84.5,546.1646,94.5,550.1646,84.5,554.1646,88.5,550.1646" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="158.5" x2="158.5" y1="532.1646" y2="550.1646"/><line style="stroke: #383838; stroke-width: 1.5;" x1="158.5" x2="118.5" y1="550.1646" y2="550.1646"/><polygon fill="#383838" points="128.5,546.1646,118.5,550.1646,128.5,554.1646,124.5,550.1646" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="106.5" x2="106.5" y1="444.1958" y2="464.1958"/><polygon fill="#383838" points="102.5,454.1958,106.5,464.1958,110.5,454.1958,106.5,458.1958" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="159" x2="106.5" y1="334.2583" y2="334.2583"/><line style="stroke: #383838; stroke-width: 1.5;" x1="106.5" x2="106.5" y1="334.2583" y2="356.2583"/><polygon fill="#383838" points="102.5,346.2583,106.5,356.2583,110.5,346.2583,106.5,350.2583" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="215" x2="267.5" y1="334.2583" y2="334.2583"/><line style="stroke: #383838; stroke-width: 1.5;" x1="267.5" x2="267.5" y1="334.2583" y2="356.2583"/><polygon fill="#383838" points="263.5,346.2583,267.5,356.2583,271.5,346.2583,267.5,350.2583" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="106.5" x2="106.5" y1="562.1646" y2="580.1646"/><line style="stroke: #383838; stroke-width: 1.5;" x1="106.5" x2="175" y1="580.1646" y2="580.1646"/><polygon fill="#383838" points="165,576.1646,175,580.1646,165,584.1646,169,580.1646" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="267.5" x2="267.5" y1="390.2271" y2="580.1646"/><line style="stroke: #383838; stroke-width: 1.5;" x1="267.5" x2="199" y1="580.1646" y2="580.1646"/><polygon fill="#383838" points="209,576.1646,199,580.1646,209,584.1646,205,580.1646" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="187" x2="187" y1="302.2583" y2="322.2583"/><polygon fill="#383838" points="183,312.2583,187,322.2583,191,312.2583,187,316.2583" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="253.75" x2="187" y1="246.2896" y2="246.2896"/><line style="stroke: #383838; stroke-width: 1.5;" x1="187" x2="187" y1="246.2896" y2="268.2896"/><polygon fill="#383838" points="183,258.2896,187,268.2896,191,258.2896,187,262.2896" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="309.75" x2="376.5" y1="246.2896" y2="246.2896"/><line style="stroke: #383838; stroke-width: 1.5;" x1="376.5" x2="376.5" y1="246.2896" y2="268.2896"/><polygon fill="#383838" points="372.5,258.2896,376.5,268.2896,380.5,258.2896,376.5,262.2896" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="187" x2="187" y1="592.1646" y2="610.1646"/><line style="stroke: #383838; stroke-width: 1.5;" x1="187" x2="269.75" y1="610.1646" y2="610.1646"/><polygon fill="#383838" points="259.75,606.1646,269.75,610.1646,259.75,614.1646,263.75,610.1646" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="376.5" x2="376.5" y1="302.2583" y2="610.1646"/><line style="stroke: #383838; stroke-width: 1.5;" x1="376.5" x2="293.75" y1="610.1646" y2="610.1646"/><polygon fill="#383838" points="303.75,606.1646,293.75,610.1646,303.75,614.1646,299.75,610.1646" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="281.75" x2="281.75" y1="214.2896" y2="234.2896"/><polygon fill="#383838" points="277.75,224.2896,281.75,234.2896,285.75,224.2896,281.75,228.2896" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="320.125" x2="281.75" y1="158.3208" y2="158.3208"/><line style="stroke: #383838; stroke-width: 1.5;" x1="281.75" x2="281.75" y1="158.3208" y2="180.3208"/><polygon fill="#383838" points="277.75,170.3208,281.75,180.3208,285.75,170.3208,281.75,174.3208" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="447.125" x2="485.5" y1="158.3208" y2="158.3208"/><line style="stroke: #383838; stroke-width: 1.5;" x1="485.5" x2="485.5" y1="158.3208" y2="180.3208"/><polygon fill="#383838" points="481.5,170.3208,485.5,180.3208,489.5,170.3208,485.5,174.3208" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="281.75" x2="281.75" y1="622.1646" y2="640.1646"/><line style="stroke: #383838; stroke-width: 1.5;" x1="281.75" x2="371.625" y1="640.1646" y2="640.1646"/><polygon fill="#383838" points="361.625,636.1646,371.625,640.1646,361.625,644.1646,365.625,640.1646" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="485.5" x2="485.5" y1="214.2896" y2="640.1646"/><line style="stroke: #383838; stroke-width: 1.5;" x1="485.5" x2="395.625" y1="640.1646" y2="640.1646"/><polygon fill="#383838" points="405.625,636.1646,395.625,640.1646,405.625,644.1646,401.625,640.1646" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="383.625" x2="383.625" y1="126.3208" y2="146.3208"/><polygon fill="#383838" points="379.625,136.3208,383.625,146.3208,387.625,136.3208,383.625,140.3208" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="383.625" x2="383.625" y1="652.1646" y2="672.1646"/><polygon fill="#383838" points="379.625,662.1646,383.625,672.1646,387.625,662.1646,383.625,666.1646" style="stroke: #383838; stroke-width: 1.0;"/><line style="stroke: #383838; stroke-width: 1.5;" x1="383.625" x2="383.625" y1="706.1333" y2="747.5322"/><polygon fill="#383838" points="379.625,737.5322,383.625,747.5322,387.625,737.5322,383.625,741.5322" style="stroke: #383838; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="387.625" y="727.438">Close Stream</text><!--MD5=[9d0fc560a42cbe10e9bbf9322081c114]
@startuml SitesPersistence

title "Sites (write)"

skinparam monochrome true
start
-> POST /secure/edit_sites;
:Ensure Login middleware;
if (hasLoginSession?) then (yes)
  :Access Body Property "sites";
  if (valid?) then (ok)
    :Parse into JSON obj;
    if (valid?) then (ok)
      :Marshal JSON to text/string;
      :Write file "sites.json";
      if (success?) then (ok)
        :Status 201;
      else (no)
        :Error 500;
      endif

    else (no)
      :Error 400;
    endif
  else (no)
    :Error 400;
  endif

else (no)
  :Error 400;
endif
:Write Response;
-> Close Stream;
stop
@enduml

PlantUML version 1.2020.02(Sun Mar 01 02:22:07 PST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.15+6-Debian-1deb12u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>